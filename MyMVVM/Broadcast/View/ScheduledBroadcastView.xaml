<Window x:Class="MyMVVM.Broadcast.View.ScheduledBroadcastView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:MyMVVM.Broadcast.View"
        xmlns:hc="https://handyorg.github.io/handycontrol"
        xmlns:rubyer="http://rubyer.io/winfx/xaml/toolkit"
        Title="ScheduledBroadcastView" 
        Width="562"
        AllowsTransparency="True"
        Background="Transparent"
        Icon="/Common/Images/logo.ico"
        ResizeMode="NoResize"
        SizeToContent="Height"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None"
        mc:Ignorable="d">


    <!--  仅在本页面生效的样式  -->
    <Window.Resources>
        <ResourceDictionary>

            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/HandyControl;component/Themes/SkinDefault.xaml" />
                <ResourceDictionary Source="pack://application:,,,/HandyControl;component/Themes/Theme.xaml" />
            </ResourceDictionary.MergedDictionaries>

        </ResourceDictionary>
    </Window.Resources>

    <Border Padding="60,0,60,0" Style="{DynamicResource BroadcastFromStyle}">

        <Grid>

            <Grid.RowDefinitions>
                <RowDefinition Height="50" />
                <RowDefinition Height="60" />
                <RowDefinition Height="auto" />
                <RowDefinition Height="60" />
                <RowDefinition Height="60" />
                <RowDefinition Height="60" />
                <RowDefinition Height="60" />
            </Grid.RowDefinitions>

            <TextBlock
                Grid.Row="0"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                FontSize="24"
                Text="设置定时广播" />

            <Grid Grid.Row="1">

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="80" />
                    <ColumnDefinition Width="20" />
                    <ColumnDefinition Width="330" />
                </Grid.ColumnDefinitions>

                <Grid
                    Grid.Column="0"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center">
                    <TextBlock FontSize="20" Text="广播类型" />
                </Grid>

                <ComboBox
                    Grid.Column="2"
                    Width="330"
                    MinHeight="50"
                    MaxHeight="150"
                    Margin="0,5,0,5"
                    hc:DropDownElement.ConsistentWidth="False"
                    Background="Transparent"
                    BorderBrush="#2196f3"
                    FontSize="18"
                    Foreground="#000000"
                    ItemsSource="{Binding BroadcastTypeList}"
                    SelectedItem="{Binding NowSelectedBroadCastType}" />

            </Grid>

            <Grid
                Grid.Row="2"
                MinHeight="60"
                MaxHeight="300"
                Visibility="{Binding IsShowTTS, Converter={StaticResource BooleanToVisibilityConverter}}">

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="80" />
                    <ColumnDefinition Width="20" />
                    <ColumnDefinition Width="330" />
                </Grid.ColumnDefinitions>

                <Grid
                    Grid.Column="0"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center">
                    <TextBlock FontSize="20" Text="广播内容" />
                </Grid>

                <ComboBox
                    Grid.Column="2"
                    Width="330"
                    MinHeight="50"
                    MaxHeight="150"
                    Margin="0,5,0,5"
                    hc:DropDownElement.ConsistentWidth="False"
                    Background="Transparent"
                    BorderBrush="#2196f3"
                    FontSize="18"
                    Foreground="#000000"
                    ItemsSource="{Binding TTSList}"
                    SelectedItem="{Binding NowSeletedTTSItem}" />

            </Grid>

            <Grid
                Grid.Row="2"
                MinHeight="60"
                MaxHeight="180"
                Visibility="{Binding IsShowMusic, Converter={StaticResource BooleanToVisibilityConverter}}">

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="80" />
                    <ColumnDefinition Width="20" />
                    <ColumnDefinition Width="330" />
                </Grid.ColumnDefinitions>

                <Grid
                    Grid.Column="0"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center">
                    <TextBlock FontSize="20" Text="选择音乐" />
                </Grid>

                <hc:CheckComboBox
                    Grid.Column="2"
                    Width="330"
                    MinHeight="50"
                    MaxHeight="150"
                    Margin="0,5,0,5"
                    hc:InfoElement.Necessary="True"
                    hc:InfoElement.ShowClearButton="True"
                    hc:ListBoxAttach.SelectedItems="{Binding SelectedMusicList}"
                    Background="Transparent"
                    BorderBrush="#2196f3"
                    FontSize="18"
                    Foreground="#000000"
                    ItemsSource="{Binding MusicList}"
                    ShowSelectAllButton="True" />

            </Grid>

            <Grid Grid.Row="3">

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="80" />
                    <ColumnDefinition Width="20" />
                    <ColumnDefinition Width="330" />
                </Grid.ColumnDefinitions>

                <Grid
                    Grid.Column="0"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center">
                    <TextBlock FontSize="20" Text="广播频率" />
                </Grid>

                <TextBox
                    Grid.Column="2"
                    Width="330"
                    MinHeight="50"
                    MaxHeight="150"
                    Margin="0,5,0,5"
                    Background="Transparent"
                    BorderBrush="#2196f3"
                    FontSize="18"
                    Foreground="#000000"
                    IsReadOnly="True"
                    Text="每天" />

            </Grid>

            <Grid Grid.Row="4">

                <Grid.Resources>
                    <ResourceDictionary>

                        <ResourceDictionary.MergedDictionaries>
                            <ResourceDictionary Source="pack://application:,,,/Rubyer;component/Themes/Generic.xaml" />
                        </ResourceDictionary.MergedDictionaries>

                        <!--  时间选择器  -->
                        <Style x:Key="DMTimePicker" TargetType="{x:Type rubyer:TimePicker}">
                            <!--  字体颜色  -->
                            <Setter Property="Foreground" Value="#000000" />
                            <!--  透明背景色  -->
                            <Setter Property="Background" Value="Transparent" />
                            <!--  边框的默认颜色  -->
                            <Setter Property="BorderBrush" Value="#2196f3" />
                            <!--  鼠标移入后边框颜色  -->
                            <Setter Property="rubyer:ControlHelper.MouseOverBrush" Value="#2196f3" />
                            <!--  选择列表的颜色  -->
                            <Setter Property="rubyer:ControlHelper.FocusedBrush" Value="#2196f3" />
                            <!--  鼠标点击后，边框和选择列表的颜色  -->
                            <Setter Property="rubyer:ControlHelper.FocusBorderBrush" Value="#2196f3" />

                            <Setter Property="Padding" Value="5,10,0,10" />
                            <Setter Property="Margin" Value="0,5,0,5" />
                            <Setter Property="Width" Value="330" />
                            <Setter Property="FontSize" Value="18" />

                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="{x:Type rubyer:TimePicker}">
                                        <Grid x:Name="PART_Root">
                                            <TextBox
                                                x:Name="PART_TextBox"
                                                Grid.Row="0"
                                                Grid.Column="0"
                                                Height="Auto"
                                                Padding="{TemplateBinding Padding}"
                                                HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}"
                                                VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"
                                                rubyer:ControlHelper.CornerRadius="{Binding Path=(rubyer:ControlHelper.CornerRadius), RelativeSource={RelativeSource Mode=TemplatedParent}}"
                                                rubyer:ControlHelper.FocusBorderBrush="{Binding Path=(rubyer:ControlHelper.FocusBorderBrush), RelativeSource={RelativeSource Mode=TemplatedParent}}"
                                                rubyer:ControlHelper.MouseOverBrush="{Binding Path=(rubyer:ControlHelper.MouseOverBrush), RelativeSource={RelativeSource Mode=TemplatedParent}}"
                                                rubyer:InputBoxHelper.InternalSpacing="{Binding Path=(rubyer:InputBoxHelper.InternalSpacing), RelativeSource={RelativeSource Mode=TemplatedParent}}"
                                                rubyer:InputBoxHelper.IsClearable="{Binding Path=(rubyer:InputBoxHelper.IsClearable), RelativeSource={RelativeSource Mode=TemplatedParent}}"
                                                rubyer:InputBoxHelper.PreContent="{Binding Path=(rubyer:InputBoxHelper.PreContent), RelativeSource={RelativeSource Mode=TemplatedParent}}"
                                                rubyer:InputBoxHelper.Watermark="{Binding Path=(rubyer:InputBoxHelper.Watermark), RelativeSource={RelativeSource Mode=TemplatedParent}}"
                                                Background="{TemplateBinding Background}"
                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                Foreground="{TemplateBinding Foreground}">
                                                <rubyer:InputBoxHelper.PostContent>
                                                    <Button
                                                        x:Name="PART_Button"
                                                        Padding="2"
                                                        rubyer:ButtonHelper.Shape="Circle"
                                                        Focusable="False"
                                                        Foreground="{DynamicResource SeconarydText}"
                                                        Style="{StaticResource TextButton}">
                                                        <rubyer:Icon Foreground="#000000" Type="TimeLine" />
                                                    </Button>
                                                </rubyer:InputBoxHelper.PostContent>
                                            </TextBox>
                                            <Grid
                                                x:Name="PART_DisabledVisual"
                                                Grid.Row="0"
                                                IsHitTestVisible="False"
                                                Opacity="0">
                                                <Popup
                                                    x:Name="PART_Popup"
                                                    AllowsTransparency="True"
                                                    HorizontalOffset="0"
                                                    Placement="Bottom"
                                                    PlacementTarget="{Binding ElementName=PART_TextBox}"
                                                    PopupAnimation="Fade"
                                                    StaysOpen="False"
                                                    VerticalOffset="5">
                                                    <rubyer:Clock x:Name="PART_Clock" Style="{TemplateBinding ClockStyle}" />
                                                </Popup>
                                            </Grid>
                                        </Grid>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="rubyer:InputBoxHelper.IsRound" Value="True">
                                                <Setter Property="rubyer:ControlHelper.CornerRadius" Value="{Binding ActualHeight, RelativeSource={RelativeSource Self}, Converter={StaticResource HalfOfDoubleConverter}}" />
                                            </Trigger>
                                            <Trigger Property="Validation.HasError" Value="True">
                                                <Setter Property="BorderBrush" Value="{DynamicResource Error}" />
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>


                        </Style>

                    </ResourceDictionary>
                </Grid.Resources>

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="80" />
                    <ColumnDefinition Width="20" />
                    <ColumnDefinition Width="330" />
                </Grid.ColumnDefinitions>

                <Grid
                    Grid.Column="0"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center">
                    <TextBlock FontSize="20" Text="定时时间" />
                </Grid>

                <rubyer:TimePicker
                    Grid.Column="2"
                    SelectedTime="{Binding DMScheduldTimeString}"
                    SelectedTimeFormat="HH时mm分ss秒"
                    Style="{StaticResource DMTimePicker}">
                    <rubyer:TimePicker.ClockStyle>
                        <Style BasedOn="{StaticResource RubyerClock}" TargetType="rubyer:Clock">
                            <Setter Property="IsShowSecond" Value="True" />
                        </Style>
                    </rubyer:TimePicker.ClockStyle>
                </rubyer:TimePicker>

            </Grid>

            <Grid Grid.Row="5">

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="80" />
                    <ColumnDefinition Width="20" />
                    <ColumnDefinition Width="330" />
                </Grid.ColumnDefinitions>

                <Grid
                    Grid.Column="0"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center">
                    <TextBlock FontSize="20" Text="持续时间" />
                </Grid>

                <ComboBox
                    Grid.Column="2"
                    Width="330"
                    MinHeight="50"
                    MaxHeight="150"
                    Margin="0,5,0,5"
                    hc:DropDownElement.ConsistentWidth="False"
                    Background="Transparent"
                    BorderBrush="#2196f3"
                    FontSize="18"
                    Foreground="#000000"
                    ItemsSource="{Binding BroadcastDurationList}"
                    SelectedItem="{Binding NowSeletedBroadcastDuration}" />

            </Grid>


            <Grid Grid.Row="6">

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="1*" />
                    <ColumnDefinition Width="1*" />
                    <ColumnDefinition Width="2*" />
                    <ColumnDefinition Width="1*" />
                    <ColumnDefinition Width="1*" />
                </Grid.ColumnDefinitions>

                <Button
                    Grid.Column="1"
                    Command="{Binding CancelButtonCommand}"
                    CommandParameter="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                    Content="取消"
                    Style="{DynamicResource MaterialDesignPaperButton}" />

                <Button
                    Grid.Column="3"
                    Command="{Binding ConfirmButtonCommand}"
                    CommandParameter="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                    Content="确定"
                    Style="{DynamicResource MaterialDesignRaisedLightButton}" />

            </Grid>

        </Grid>

    </Border>

</Window>
