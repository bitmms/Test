<Window x:Class="MyMVVM.Broadcast.View.TaskBroadcastView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:MyMVVM.Broadcast.View"
        mc:Ignorable="d"
        Title="TaskBroadcastView"
        Width="562"
        SizeToContent="Height"
        Icon="/Common/Images/logo.ico"
        ResizeMode="NoResize"
        AllowsTransparency="True"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None"
        xmlns:rubyer="http://rubyer.io/winfx/xaml/toolkit"
        xmlns:hc="https://handyorg.github.io/handycontrol"
        Background="Transparent"
        >


    <!-- 仅在本页面生效的样式 -->
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/HandyControl;component/Themes/SkinDefault.xaml"/>
                <ResourceDictionary Source="pack://application:,,,/HandyControl;component/Themes/Theme.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Window.Resources>


    <Border Padding="60,0,60,0" Style="{DynamicResource BroadcastFromStyle}">

        <Grid>

            <Grid.RowDefinitions>
                <RowDefinition Height="50" />
                <RowDefinition Height="60" />
                <RowDefinition Height="auto" />
                <RowDefinition Height="60" />
                <RowDefinition Height="60" />
                <RowDefinition Height="60" />
            </Grid.RowDefinitions>

            <TextBlock Grid.Row="0" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="24" Text="设置任务广播" />

            <Grid Grid.Row="1">

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="80" />
                    <ColumnDefinition Width="20" />
                    <ColumnDefinition Width="330" />
                </Grid.ColumnDefinitions>

                <Grid Grid.Column="0"
                      HorizontalAlignment="Center"
                      VerticalAlignment="Center"
                      >
                    <TextBlock  FontSize="20" Text="广播类型" />
                </Grid>

                <ComboBox Grid.Column="2"
                          Foreground="#000000"
                          Background="Transparent"
                          BorderBrush="#2196f3"
                          FontSize="18"
                          Width="330"
                          MinHeight="50"
                          MaxHeight="150"
                          Margin="0 5 0 5"
                          hc:DropDownElement.ConsistentWidth="False" 
                          ItemsSource="{Binding BroadcastTypeList}"
                          SelectedItem="{Binding NowSelectedBroadCastType}"
                          />

            </Grid>

            <Grid Grid.Row="2" MinHeight="60" MaxHeight="300" Visibility="{Binding IsShowTTS, Converter={StaticResource BooleanToVisibilityConverter}}">

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="80" />
                    <ColumnDefinition Width="20" />
                    <ColumnDefinition Width="330" />
                </Grid.ColumnDefinitions>

                <Grid Grid.Column="0"
                      HorizontalAlignment="Center"
                      VerticalAlignment="Center"
                      >
                    <TextBlock  FontSize="20" Text="广播内容" />
                </Grid>

                <ComboBox
                    Grid.Column="2"
                    Width="330"
                    MinHeight="50"
                    MaxHeight="150"
                    Margin="0,5,0,5"
                    hc:DropDownElement.ConsistentWidth="False"
                    Background="Transparent"
                    BorderBrush="#2196f3"
                    FontSize="18"
                    Foreground="#000000"
                    ItemsSource="{Binding TTSList}"
                    SelectedItem="{Binding NowSeletedTTSItem}" />

            </Grid>

            <Grid Grid.Row="2" MinHeight="60" MaxHeight="300" Visibility="{Binding IsShowMusic, Converter={StaticResource BooleanToVisibilityConverter}}">

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="80" />
                    <ColumnDefinition Width="20" />
                    <ColumnDefinition Width="330" />
                </Grid.ColumnDefinitions>

                <Grid Grid.Column="0"
                      HorizontalAlignment="Center"
                      VerticalAlignment="Center"
                      >
                    <TextBlock  FontSize="20" Text="选择音乐" />
                </Grid>

                <hc:CheckComboBox Grid.Column="2"
                                  Foreground="#000000"
                                  Background="Transparent"
                                  BorderBrush="#2196f3"
                                  FontSize="18"
                                  Width="330"
                                  MinHeight="50"
                                  MaxHeight="150"
                                  Margin="0 5 0 5"
                                  hc:ListBoxAttach.SelectedItems="{Binding SelectedMusicList}" 
                                  ItemsSource="{Binding MusicList}" 
                                  hc:InfoElement.ShowClearButton="True" 
                                  ShowSelectAllButton="True"
                                  hc:InfoElement.Necessary="True" 
                  />

            </Grid>

            <Grid Grid.Row="3">

                <Grid.Resources>
                    <ResourceDictionary>
                        <ResourceDictionary.MergedDictionaries>
                            <ResourceDictionary Source="pack://application:,,,/Rubyer;component/Themes/Generic.xaml" />
                        </ResourceDictionary.MergedDictionaries>
                        <!-- 日期时间选择器 -->
                        <Style x:Key="DMDateTimePicker" TargetType="{x:Type rubyer:DateTimePicker}">
                            <!-- 字体颜色 -->
                            <Setter Property="Foreground" Value="#000000" />
                            <!-- 透明背景色 -->
                            <Setter Property="Background" Value="Transparent"/>
                            <!-- 边框的默认颜色 -->
                            <Setter Property="BorderBrush" Value="#2196f3" />
                            <!-- 鼠标移入后边框颜色 -->
                            <Setter Property="rubyer:ControlHelper.MouseOverBrush" Value="#2196f3" />
                            <!-- 选择列表的颜色 -->
                            <Setter Property="rubyer:ControlHelper.FocusedBrush" Value="#2196f3" />
                            <!-- 鼠标点击后，边框和选择列表的颜色 -->
                            <Setter Property="rubyer:ControlHelper.FocusBorderBrush" Value="#2196f3" />

                            <Setter Property="Padding" Value="5 10 0 10"/>
                            <Setter Property="Margin" Value="0 5 0 5"/>
                            <Setter Property="Width" Value="330"/>
                            <Setter Property="FontSize" Value="18"/>

                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="{x:Type rubyer:DateTimePicker}">
                                        <Grid x:Name="PART_Root">
                                            <TextBox x:Name="PART_TextBox"
                             Style="{StaticResource RubyerTextBox}"
                             Grid.Row="0"
                             Grid.Column="0"
                             Height="Auto"
                             Padding="{TemplateBinding Padding}"
                             HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}"
                             VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"
                             rubyer:ControlHelper.CornerRadius="{Binding Path=(rubyer:ControlHelper.CornerRadius), RelativeSource={RelativeSource Mode=TemplatedParent}}"
                             rubyer:ControlHelper.FocusBorderBrush="{Binding Path=(rubyer:ControlHelper.FocusBorderBrush), RelativeSource={RelativeSource Mode=TemplatedParent}}"
                             rubyer:ControlHelper.MouseOverBrush="{Binding Path=(rubyer:ControlHelper.MouseOverBrush), RelativeSource={RelativeSource Mode=TemplatedParent}}"
                             rubyer:InputBoxHelper.InternalSpacing="{Binding Path=(rubyer:InputBoxHelper.InternalSpacing), RelativeSource={RelativeSource Mode=TemplatedParent}}"
                             rubyer:InputBoxHelper.IsClearable="{Binding Path=(rubyer:InputBoxHelper.IsClearable), RelativeSource={RelativeSource Mode=TemplatedParent}}"
                             rubyer:InputBoxHelper.PreContent="{Binding Path=(rubyer:InputBoxHelper.PreContent), RelativeSource={RelativeSource Mode=TemplatedParent}}"
                             rubyer:InputBoxHelper.Watermark="{Binding Path=(rubyer:InputBoxHelper.Watermark), RelativeSource={RelativeSource Mode=TemplatedParent}}"
                             Background="{TemplateBinding Background}"
                             BorderBrush="{TemplateBinding BorderBrush}"
                             BorderThickness="{TemplateBinding BorderThickness}"
                             Foreground="{TemplateBinding Foreground}">
                                                <rubyer:InputBoxHelper.PostContent>
                                                    <Button x:Name="PART_Button"
                                    Style="{StaticResource TextButton}"
                                    Padding="2"
                                    rubyer:ButtonHelper.Shape="Circle"
                                    Focusable="False"
                                    Foreground="{DynamicResource SeconarydText}">
                                                        <rubyer:Icon Type="CalendarTodoFill" Foreground="#000000"/>
                                                    </Button>
                                                </rubyer:InputBoxHelper.PostContent>
                                            </TextBox>
                                            <Grid x:Name="PART_DisabledVisual"
                          Grid.Row="0"
                          IsHitTestVisible="False"
                          Opacity="0">
                                                <Popup x:Name="PART_Popup"
                   AllowsTransparency="True"
                   Placement="Bottom"
                   PlacementTarget="{Binding ElementName=PART_TextBox}"
                   PopupAnimation="Fade"
                   StaysOpen="False"
                   VerticalOffset="5">
                                                    <rubyer:Card Margin="5"
                             Padding="0"
                             Background="{DynamicResource FloatBackground}"
                             BorderThickness="0">
                                                        <Grid>
                                                            <Grid.RowDefinitions>
                                                                <RowDefinition Height="Auto" />
                                                                <RowDefinition Height="Auto" />
                                                                <RowDefinition Height="Auto" />
                                                            </Grid.RowDefinitions>

                                                            <Border x:Name="title"
                                Grid.Row="0"
                                Padding="{Binding Path=(rubyer:HeaderHelper.Padding), RelativeSource={RelativeSource Mode=TemplatedParent}}"
                                CornerRadius="{DynamicResource TopContainerCornerRadius}" />

                                                            <Border Grid.Row="1">
                                                                <StackPanel Orientation="Horizontal">
                                                                    <Calendar x:Name="PART_Calendar"
                                          Style="{TemplateBinding CalendarStyle}"
                                          Margin="0"
                                          rubyer:ControlHelper.CornerRadius="0"
                                          rubyer:HeaderHelper.Background="Transparent"
                                          rubyer:HeaderHelper.Foreground="{DynamicResource DefaultForeground}"
                                          Background="Transparent" />
                                                                    <Border BorderBrush="{DynamicResource BorderLighter}" BorderThickness="1 0 0 0" />
                                                                    <rubyer:Clock x:Name="PART_Clock"
                                              Style="{TemplateBinding ClockStyle}"
                                              Height="{Binding ActualHeight, ElementName=PART_Calendar}"
                                              Margin="0"
                                              rubyer:ControlHelper.CornerRadius="0"
                                              Background="Transparent"
                                              IsShowConfirmButton="False" />
                                                                </StackPanel>
                                                            </Border>

                                                            <Button x:Name="PART_ConfirmButton"
                                Grid.Row="2"
                                Margin="5"
                                Content="{DynamicResource I18N_Clock_Ok}" />
                                                        </Grid>
                                                    </rubyer:Card>
                                                </Popup>
                                            </Grid>
                                        </Grid>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="rubyer:InputBoxHelper.IsRound" Value="True">
                                                <Setter Property="rubyer:ControlHelper.CornerRadius" Value="{Binding ActualHeight, RelativeSource={RelativeSource Self}, Converter={StaticResource HalfOfDoubleConverter}}" />
                                            </Trigger>
                                            <Trigger Property="Validation.HasError" Value="True">
                                                <Setter Property="BorderBrush" Value="{DynamicResource Error}" />
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>

                        </Style>
                    </ResourceDictionary>
                </Grid.Resources>

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="80" />
                    <ColumnDefinition Width="20" />
                    <ColumnDefinition Width="330" />
                </Grid.ColumnDefinitions>

                <Grid Grid.Column="0"
                      HorizontalAlignment="Center"
                      VerticalAlignment="Center"
                      >
                    <TextBlock  FontSize="20" Text="开始时间" />
                </Grid>

                <rubyer:DateTimePicker Grid.Column="2"
                                               Style="{StaticResource DMDateTimePicker}"
                                               SelectedDateTimeFormat="yyyy年MM月dd日 HH时mm分ss秒" 
                                               SelectedDateTime="{Binding DMBeginDateTimeString}">
                    <rubyer:DateTimePicker.ClockStyle>
                        <Style BasedOn="{StaticResource RubyerClock}" TargetType="rubyer:Clock">
                            <Setter Property="IsShowSecond" Value="True" />
                        </Style>
                    </rubyer:DateTimePicker.ClockStyle>
                </rubyer:DateTimePicker>

            </Grid>

            <Grid Grid.Row="4">

                <Grid.Resources>
                    <ResourceDictionary>
                        <ResourceDictionary.MergedDictionaries>
                            <ResourceDictionary Source="pack://application:,,,/Rubyer;component/Themes/Generic.xaml" />
                        </ResourceDictionary.MergedDictionaries>
                        <!-- 日期时间选择器 -->
                        <Style x:Key="DMDateTimePicker" TargetType="{x:Type rubyer:DateTimePicker}">
                            <!-- 字体颜色 -->
                            <Setter Property="Foreground" Value="#000000" />
                            <!-- 透明背景色 -->
                            <Setter Property="Background" Value="Transparent"/>
                            <!-- 边框的默认颜色 -->
                            <Setter Property="BorderBrush" Value="#2196f3" />
                            <!-- 鼠标移入后边框颜色 -->
                            <Setter Property="rubyer:ControlHelper.MouseOverBrush" Value="#2196f3" />
                            <!-- 选择列表的颜色 -->
                            <Setter Property="rubyer:ControlHelper.FocusedBrush" Value="#2196f3" />
                            <!-- 鼠标点击后，边框和选择列表的颜色 -->
                            <Setter Property="rubyer:ControlHelper.FocusBorderBrush" Value="#2196f3" />

                            <Setter Property="Padding" Value="5 10 0 10"/>
                            <Setter Property="Margin" Value="0 5 0 5"/>
                            <Setter Property="Width" Value="330"/>
                            <Setter Property="FontSize" Value="18"/>

                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="{x:Type rubyer:DateTimePicker}">
                                        <Grid x:Name="PART_Root">
                                            <TextBox x:Name="PART_TextBox"
                             Style="{StaticResource RubyerTextBox}"
                             Grid.Row="0"
                             Grid.Column="0"
                             Height="Auto"
                             Padding="{TemplateBinding Padding}"
                             HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}"
                             VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"
                             rubyer:ControlHelper.CornerRadius="{Binding Path=(rubyer:ControlHelper.CornerRadius), RelativeSource={RelativeSource Mode=TemplatedParent}}"
                             rubyer:ControlHelper.FocusBorderBrush="{Binding Path=(rubyer:ControlHelper.FocusBorderBrush), RelativeSource={RelativeSource Mode=TemplatedParent}}"
                             rubyer:ControlHelper.MouseOverBrush="{Binding Path=(rubyer:ControlHelper.MouseOverBrush), RelativeSource={RelativeSource Mode=TemplatedParent}}"
                             rubyer:InputBoxHelper.InternalSpacing="{Binding Path=(rubyer:InputBoxHelper.InternalSpacing), RelativeSource={RelativeSource Mode=TemplatedParent}}"
                             rubyer:InputBoxHelper.IsClearable="{Binding Path=(rubyer:InputBoxHelper.IsClearable), RelativeSource={RelativeSource Mode=TemplatedParent}}"
                             rubyer:InputBoxHelper.PreContent="{Binding Path=(rubyer:InputBoxHelper.PreContent), RelativeSource={RelativeSource Mode=TemplatedParent}}"
                             rubyer:InputBoxHelper.Watermark="{Binding Path=(rubyer:InputBoxHelper.Watermark), RelativeSource={RelativeSource Mode=TemplatedParent}}"
                             Background="{TemplateBinding Background}"
                             BorderBrush="{TemplateBinding BorderBrush}"
                             BorderThickness="{TemplateBinding BorderThickness}"
                             Foreground="{TemplateBinding Foreground}">
                                                <rubyer:InputBoxHelper.PostContent>
                                                    <Button x:Name="PART_Button"
                                    Style="{StaticResource TextButton}"
                                    Padding="2"
                                    rubyer:ButtonHelper.Shape="Circle"
                                    Focusable="False"
                                    Foreground="{DynamicResource SeconarydText}">
                                                        <rubyer:Icon Type="CalendarTodoFill" Foreground="#000000"/>
                                                    </Button>
                                                </rubyer:InputBoxHelper.PostContent>
                                            </TextBox>
                                            <Grid x:Name="PART_DisabledVisual"
                          Grid.Row="0"
                          IsHitTestVisible="False"
                          Opacity="0">
                                                <Popup x:Name="PART_Popup"
                   AllowsTransparency="True"
                   Placement="Bottom"
                   PlacementTarget="{Binding ElementName=PART_TextBox}"
                   PopupAnimation="Fade"
                   StaysOpen="False"
                   VerticalOffset="5">
                                                    <rubyer:Card Margin="5"
                             Padding="0"
                             Background="{DynamicResource FloatBackground}"
                             BorderThickness="0">
                                                        <Grid>
                                                            <Grid.RowDefinitions>
                                                                <RowDefinition Height="Auto" />
                                                                <RowDefinition Height="Auto" />
                                                                <RowDefinition Height="Auto" />
                                                            </Grid.RowDefinitions>

                                                            <Border x:Name="title"
                                Grid.Row="0"
                                Padding="{Binding Path=(rubyer:HeaderHelper.Padding), RelativeSource={RelativeSource Mode=TemplatedParent}}"
                                CornerRadius="{DynamicResource TopContainerCornerRadius}" />

                                                            <Border Grid.Row="1">
                                                                <StackPanel Orientation="Horizontal">
                                                                    <Calendar x:Name="PART_Calendar"
                                          Style="{TemplateBinding CalendarStyle}"
                                          Margin="0"
                                          rubyer:ControlHelper.CornerRadius="0"
                                          rubyer:HeaderHelper.Background="Transparent"
                                          rubyer:HeaderHelper.Foreground="{DynamicResource DefaultForeground}"
                                          Background="Transparent" />
                                                                    <Border BorderBrush="{DynamicResource BorderLighter}" BorderThickness="1 0 0 0" />
                                                                    <rubyer:Clock x:Name="PART_Clock"
                                              Style="{TemplateBinding ClockStyle}"
                                              Height="{Binding ActualHeight, ElementName=PART_Calendar}"
                                              Margin="0"
                                              rubyer:ControlHelper.CornerRadius="0"
                                              Background="Transparent"
                                              IsShowConfirmButton="False" />
                                                                </StackPanel>
                                                            </Border>

                                                            <Button x:Name="PART_ConfirmButton"
                                Grid.Row="2"
                                Margin="5"
                                Content="{DynamicResource I18N_Clock_Ok}" />
                                                        </Grid>
                                                    </rubyer:Card>
                                                </Popup>
                                            </Grid>
                                        </Grid>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="rubyer:InputBoxHelper.IsRound" Value="True">
                                                <Setter Property="rubyer:ControlHelper.CornerRadius" Value="{Binding ActualHeight, RelativeSource={RelativeSource Self}, Converter={StaticResource HalfOfDoubleConverter}}" />
                                            </Trigger>
                                            <Trigger Property="Validation.HasError" Value="True">
                                                <Setter Property="BorderBrush" Value="{DynamicResource Error}" />
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>

                        </Style>
                    </ResourceDictionary>
                </Grid.Resources>

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="80" />
                    <ColumnDefinition Width="20" />
                    <ColumnDefinition Width="330" />
                </Grid.ColumnDefinitions>

                <Grid Grid.Column="0"
                      HorizontalAlignment="Center"
                      VerticalAlignment="Center"
                      >
                    <TextBlock  FontSize="20" Text="结束时间" />
                </Grid>

                <rubyer:DateTimePicker Grid.Column="2"
                                               Style="{StaticResource DMDateTimePicker}"
                                               SelectedDateTimeFormat="yyyy年MM月dd日 HH时mm分ss秒" 
                                               SelectedDateTime="{Binding DMEndDateTimeString}">
                    <rubyer:DateTimePicker.ClockStyle>
                        <Style BasedOn="{StaticResource RubyerClock}" TargetType="rubyer:Clock">
                            <Setter Property="IsShowSecond" Value="True" />
                        </Style>
                    </rubyer:DateTimePicker.ClockStyle>
                </rubyer:DateTimePicker>

            </Grid>

            <Grid Grid.Row="5">

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="1*" />
                    <ColumnDefinition Width="1*" />
                    <ColumnDefinition Width="2*" />
                    <ColumnDefinition Width="1*" />
                    <ColumnDefinition Width="1*" />
                </Grid.ColumnDefinitions>

                <Button Grid.Column="1"
                                Command="{Binding CancelButtonCommand}"
                                CommandParameter="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                Content="取消"
                                Style="{DynamicResource MaterialDesignPaperButton}" />

                <Button Grid.Column="3"
                                Command="{Binding ConfirmButtonCommand}"
                                CommandParameter="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                                Content="确定"
                                Style="{DynamicResource MaterialDesignRaisedLightButton}" />

            </Grid>

        </Grid>

    </Border>

</Window>